

* forces current values to be saved
.options savecurrents

******************************************
* input voltage source
vS n1 0 0 sin(0 230 50)
Fs n1 0 Vt 1.4162500531
R3 n1 0 1




E1 n3 nt n1 0 0.70609
Vt nt n2 0


**** Envelope detector ****

D1 0 n3 Default
D2 n3 n4 Default
D3 0 n2 Default
D4 n2 n4 Default


*R n4 0 100k
C1 n4 0 412u



**** Voltage regulator ****

* positive limiter

R2 n4 n5 369.982k
Dp n5 0 D_series







.model Default D
.model D_series D (n=19)
.op
.end


.measure tran yavg AVG v(n5) from=0.1 to=0.3
.measure tran ymax MAX v(n5) from=0.1 to=0.3
.measure tran ymin MIN v(n5) from=0.1 to=0.3

.control

******************************************
* analise no tempo
tran 1e-5 0.4 0.2


******************************************
hardcopy vout.ps v(n3)-v(n2) v(n5)
hardcopy venv.ps v(n3)-v(n2) v(n4)


.endc
